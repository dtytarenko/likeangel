(()=>{"use strict";var t=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"wcus-print-form"},[e("div",{staticClass:"wcus-popup__title"},[t._v(t._s(t.$t("Invoice printing")))]),t._v(" "),e("div",{staticClass:"wcus-popup__content",attrs:{id:"wcus-print-app"}},[e("div",{staticClass:"wcus-form-group"},[e("label",{attrs:{for:"wcus-ttn-print-type"}},[t._v(t._s(t.$t("Print type")))]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.printType,expression:"printType"}],staticClass:"wcus-form-control",attrs:{id:"wcus-ttn-print-type"},on:{change:function(n){var e=Array.prototype.filter.call(n.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.printType=n.target.multiple?e:e[0]}}},[e("option",{attrs:{value:"A4"}},[t._v(t._s(t.$t("A4, 1 copy")))]),t._v(" "),e("option",{attrs:{value:"A4_2"}},[t._v(t._s(t.$t("A4, 2 copies")))]),t._v(" "),e("option",{attrs:{value:"marking_85"}},[t._v(t._s(t.$t("Marking 85x85")))]),t._v(" "),e("option",{attrs:{value:"zebra"}},[t._v(t._s(t.$t("Marking 100x100, zebra")))])])]),t._v(" "),t.copiesEnable?e("div",{staticClass:"wcus-form-group"},[e("label",{attrs:{for:"wcus-ttn-print-copies"}},[t._v(t._s(t.$t("Number of copies")))]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.copies,expression:"copies"}],staticClass:"wcus-form-control",attrs:{id:"wcus-ttn-print-copies"},on:{change:function(n){var e=Array.prototype.filter.call(n.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.copies=n.target.multiple?e:e[0]}}},t._l(10,(function(n){return e("option",{domProps:{value:n}},[t._v(t._s(n))])})),0)]):t._e(),t._v(" "),e("div",{staticClass:"wcus-popup__submit-wrap"},[e("a",{staticClass:"wcus-btn wcus-btn--primary wcus-popup__submit",attrs:{id:"wcus-print-popup-submit",target:"_blank",href:t.homeUrl+"/wp-admin/admin.php?page=wc_ukr_shipping_ttn_print"+t.printQuery}},[t._v(t._s(t.$t("Print")))])])])])};function n(t,n,e,r,o,s,i,a){var c,l="function"==typeof t?t.options:t;if(n&&(l.render=n,l.staticRenderFns=e,l._compiled=!0),r&&(l.functional=!0),s&&(l._scopeId="data-v-"+s),i?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},l._ssrRegister=c):o&&(c=a?function(){o.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(t,n){return c.call(n),u(t,n)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,c):[c]}return{exports:t,options:l}}t._withStripped=!0;var e=n({props:["ids"],i18n:{messages:{ru:{"Invoice printing":"Печать накладных","Print type":"Тип печати","A4, 1 copy":"А4, 1 копия","A4, 2 copies":"А4, 2 копии","Marking 85x85":"Маркировка 85х85","Marking 100x100, zebra":"Маркировка 100х100, зебра","Number of copies":"Количество копий",Print:"Печать"},ua:{"Invoice printing":"Друк накладних","Print type":"Тип друку","A4, 1 copy":"А4, 1 копія","A4, 2 copies":"А4, 2 копії","Marking 85x85":"Маркування 85х85","Marking 100x100, zebra":"Маркування 100х100, зебра","Number of copies":"Кількість копій",Print:"Друк"}}},data:()=>({printType:"A4",copies:1}),computed:{copiesEnable:function(){return"marking_85"===this.printType},printQuery:function(){return"&ttn="+encodeURIComponent(this.ids.join(","))+"&print_type="+encodeURIComponent(this.printType)+"&copies="+encodeURIComponent(this.copies)},homeUrl:function(){return window.wc_ukr_shipping_globals.homeUrl}},methods:{print:function(){alert("OK")},setIds:function(t){this.ids=t}}},t,[],!1,null,null,null);e.options.__file="frontend/js/ttn-global/components/PrintForm.vue";const r=e.exports;var o=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"wcus-ttn-attach"},[t.locked?e("wcus-preloader"):t._e(),t._v(" "),e("div",{staticClass:"wcus-ttn-attach__title"},[t._v(t._s(t.$t("Attach invoice")))]),t._v(" "),e("div",{staticClass:"wcus-ttn-attach__order"},[t._v(t._s(t.$t("Order"))+" #"+t._s(t.orderId))]),t._v(" "),e("div",{staticClass:"wcus-form-group"},[e("label",{attrs:{for:"ttn_number"}},[t._v(t._s(t.$t("Invoice number")))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.ttnNumber,expression:"ttnNumber"}],staticClass:"wcus-form-control",attrs:{type:"text",name:"ttn_number",id:"ttn_number"},domProps:{value:t.ttnNumber},on:{input:function(n){n.target.composing||(t.ttnNumber=n.target.value)}}}),t._v(" "),t.error.length?e("div",{staticClass:"wcus-form-group__error"},[t._v(t._s(t.error))]):t._e()]),t._v(" "),e("div",{staticClass:"wcus-form-group wcus-form-group--horizontal"},[e("label",{staticClass:"wcus-switcher"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.addToTracking,expression:"addToTracking"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.addToTracking)?t._i(t.addToTracking,null)>-1:t.addToTracking},on:{change:function(n){var e=t.addToTracking,r=n.target,o=!!r.checked;if(Array.isArray(e)){var s=t._i(e,null);r.checked?s<0&&(t.addToTracking=e.concat([null])):s>-1&&(t.addToTracking=e.slice(0,s).concat(e.slice(s+1)))}else t.addToTracking=o}}}),t._v(" "),e("span",{staticClass:"wcus-switcher__control"})]),t._v(" "),e("div",{staticClass:"wcus-control-label"},[t._v(t._s(t.$t("Add to tracking")))])]),t._v(" "),e("div",{staticClass:"wcus-ttn-attach__buttons"},[e("button",{staticClass:"wcus-btn wcus-btn--primary wcus-btn--md",on:{click:function(n){return n.stopPropagation(),t.send.apply(null,arguments)}}},[t._v(t._s(t.$t("Attach")))])])],1)};o._withStripped=!0;var s=function(){var t=this;t.$createElement;return t._self._c,t._m(0)};s._withStripped=!0;var i=n({},s,[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"wcus-preloader-wrap"},[e("div",{staticClass:"wcus-preloader"},[e("div"),t._v(" "),e("div"),t._v(" "),e("div"),t._v(" "),e("div")])])}],!1,null,null,null);i.options.__file="frontend/js/@wcus/Components/Preloader.vue";const a=i.exports;function c(){return new class{constructor(t){window.jQuery||console.error("jQuery not found."),this.config=t,this.xhr=null,this.config.globals||(this.config.globals={})}async post(t,n){const e=window.jQuery,r=this;return new Promise((function(o,s){r.xhr=e.ajax({method:"POST",url:r.config.url,data:Object.assign({action:t},r.config.globals,n),dataType:"json",success:function(t){r.xhr=null,o(t)},error:function(t,n,e){r.xhr=null,s({jqXHR:t,textStatus:n,errorThrown:e})}})}))}async postCors(t,n){const e=window.jQuery,r=this;return new Promise((function(o,s){r.xhr=e.ajax({method:"POST",url:t,data:JSON.stringify(n),dataType:"json",contentType:"applicat3ion/json",timeout:3e3,success:function(t){r.xhr=null,o(t)},error:function(t,n,e){r.xhr=null,s({jqXHR:t,textStatus:n,errorThrown:e})}})}))}abort(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}({url:wc_ukr_shipping_globals.ajaxUrl,globals:{_token:wc_ukr_shipping_globals.nonce,lang:wc_ukr_shipping_globals.lang}})}const l=new c,u=async(t,n,e)=>t.length?await l.post("wcus_ttn_attach",{ttn:t,order_id:n,add_to_tracking:e}):{success:!1,error:"Enter correct invoice number"};var p=n({components:{"wcus-preloader":a},i18n:{messages:{ru:{"Attach invoice":"Привязать накладную",Order:"Заказ","Invoice number":"Номер накладной",Attach:"Привязать","Add to tracking":"Добавить в трекинг"},ua:{"Attach invoice":"Прив'язати накладну",Order:"Замовлення","Invoice number":"Номер накладної",Attach:"Прив'язати","Add to tracking":"Додати у трекінг"}}},props:["orderId"],data:()=>({ttnNumber:"",error:"",locked:!1,addToTracking:1===wc_ukr_shipping_globals.options.wcus_tracking_auto_send}),methods:{async send(){if(this.locked)return;this.error="",this.locked=!0;const t=await u(this.ttnNumber,this.orderId,this.addToTracking?1:0);t.success?location.reload():(this.locked=!1,this.error=t.error)}}},o,[],!1,null,null,null);p.options.__file="frontend/js/ttn-global/components/AttachForm.vue";const d=p.exports,_=window.jQuery,v=new c;window.WCUkrShipping.Printer={open:function(t){Array.isArray(t)||(t=[t]),window.WCUkrShipping.Modal.open({type:"component",component:r,props:{ids:t},classes:["wcus-modal"]})}},_((function(){!function(){let t=!1;_(".j-wcus-ttn-delete").on("click",(async function(n){if(n.preventDefault(),t)return;let e=_(this);t=!0;const r=await v.post("wcus_ttn_delete",{ttn_id:this.dataset.ttn});t=!1,r.success?e.closest(".j-wcus-ttn-item").length?e.closest(".j-wcus-ttn-item").remove():location.reload():r.exception&&console.error(r.exception)}))}(),_("body").on("click",".j-wcus-print-ttn",(function(t){t.preventDefault(),t.stopPropagation(),window.WCUkrShipping.Printer.open(this.dataset.ttn)})),_("body").on("click",".j-wcus-attach-ttn",(function(t){t.preventDefault(),t.stopPropagation(),window.WCUkrShipping.Modal.open({type:"component",component:d,props:{orderId:this.dataset.orderId},classes:["wcus-modal"]})}))}))})();